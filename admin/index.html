<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel Admin | Instituto Abraham Lincoln</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="/style.css?v=20260211-5">
    <style>
        .admin-page { padding-top: 100px; background: #f4f4f4; min-height: 100vh; }
        .admin-hero { padding: 30px 6% 10px; }
        .admin-hero h1 { color: var(--primary); margin-bottom: 6px; }
        .admin-hero p { color: #666; }

        .admin-tabs { display: flex; gap: 0; padding: 0 6%; border-bottom: 2px solid #ddd; margin-bottom: 20px; flex-wrap: wrap; }
        .admin-tab { padding: 12px 20px; cursor: pointer; font-weight: 600; color: #888; border-bottom: 3px solid transparent; transition: 0.2s; }
        .admin-tab:hover { color: var(--primary); }
        .admin-tab.active { color: var(--primary); border-bottom-color: var(--secondary); }

        .admin-section { display: none; padding: 0 6% 40px; }
        .admin-section.active { display: block; }

        .admin-card { background: #fff; border-radius: 14px; padding: 24px; margin-bottom: 18px; box-shadow: 0 4px 14px rgba(0,0,0,0.06); }
        .admin-card h3 { color: var(--primary); margin-bottom: 12px; }

        .admin-table { width: 100%; border-collapse: collapse; font-size: 0.88rem; }
        .admin-table th { text-align: left; padding: 10px 8px; border-bottom: 2px solid #ddd; color: var(--primary); font-size: 0.82rem; text-transform: uppercase; }
        .admin-table td { padding: 10px 8px; border-bottom: 1px solid #eee; }
        .admin-table tr:hover { background: #fafafa; }

        .badge-role { display: inline-block; padding: 3px 10px; border-radius: 20px; font-size: 0.75rem; font-weight: 600; }
        .badge-role.admin { background: #ffe0e0; color: #c00; }
        .badge-role.teacher { background: #e0f0ff; color: #036; }
        .badge-role.student { background: #e8f5e9; color: #2e7d32; }

        .form-group { margin-bottom: 14px; }
        .form-group label { display: block; font-weight: 600; margin-bottom: 4px; color: var(--primary); font-size: 0.88rem; }
        .form-group input, .form-group select { width: 100%; padding: 10px 12px; border: 1px solid #ccc; border-radius: 8px; font-size: 0.9rem; font-family: inherit; }
        .form-group select { cursor: pointer; }

        .btn-admin { padding: 10px 22px; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; font-size: 0.88rem; transition: 0.2s; }
        .btn-admin.primary { background: var(--primary); color: #fff; }
        .btn-admin.primary:hover { background: #132d5e; }
        .btn-admin.danger { background: #c00; color: #fff; }
        .btn-admin.danger:hover { background: #a00; }
        .btn-admin.small { padding: 5px 12px; font-size: 0.78rem; }

        .invite-link { background: #f0f6ff; padding: 12px; border-radius: 8px; word-break: break-all; margin-top: 10px; font-size: 0.85rem; }
        .invite-link a { color: var(--primary); text-decoration: underline; }

        .msg { padding: 10px; border-radius: 8px; margin-top: 10px; font-size: 0.88rem; }
        .msg.ok { background: #e8f5e9; color: #2e7d32; }
        .msg.err { background: #fce4ec; color: #c62828; }

        @media (max-width: 768px) {
            .admin-table { font-size: 0.78rem; }
            .admin-table th, .admin-table td { padding: 8px 4px; }
            .admin-tabs { gap: 0; }
            .admin-tab { padding: 10px 12px; font-size: 0.82rem; }
        }
    </style>
</head>
<body class="admin-page is-auth">
    <header>
        <div class="logo">
            <img src="/imagenes/circuloabraham.png" alt="Logo">
            INSTITUTO ABRAHAM LINCOLN
        </div>
        <nav><ul>
            <li><a href="/">Inicio</a></li>
            <li><a href="/aula/">Aula</a></li>
        </ul></nav>
        <div class="nav-actions">
            <a class="btn btn-outline btn-logout" href="#">Cerrar Sesión</a>
        </div>
    </header>

    <section class="admin-hero">
        <h1><i class="fas fa-shield-alt"></i> Panel de Administración</h1>
        <p id="adminWelcome">Cargando…</p>
    </section>

    <div class="admin-tabs">
        <div class="admin-tab active" data-tab="teachers"><i class="fas fa-chalkboard-teacher"></i> Maestros</div>
        <div class="admin-tab" data-tab="invite"><i class="fas fa-envelope"></i> Invitar</div>
        <div class="admin-tab" data-tab="users"><i class="fas fa-users"></i> Usuarios</div>
    </div>

    <!-- ===== TAB: MAESTROS ===== -->
    <section class="admin-section active" id="tab-teachers">
        <div class="admin-card">
            <h3><i class="fas fa-chalkboard-teacher"></i> Maestros registrados</h3>
            <div id="teachersList">Cargando…</div>
        </div>
    </section>

    <!-- ===== TAB: INVITAR ===== -->
    <section class="admin-section" id="tab-invite">
        <div class="admin-card">
            <h3><i class="fas fa-paper-plane"></i> Crear Invitación</h3>
            <p style="color:#666; margin-bottom:14px; font-size:0.88rem;">Genera un link de invitación. El maestro lo abre, crea su contraseña y queda activo con su materia pre-asignada.</p>
            <form id="inviteForm">
                <div class="form-group">
                    <label>Correo del maestro</label>
                    <input type="email" id="inviteEmail" placeholder="maestro@lincoln.edu.mx" required>
                </div>
                <div class="form-group">
                    <label>Rol</label>
                    <select id="inviteRole">
                        <option value="teacher">Maestro</option>
                        <option value="admin">Admin</option>
                    </select>
                </div>
                <div id="subjectFields">
                    <div style="border-top:1px solid #eee; margin:14px 0 10px; padding-top:12px;">
                        <strong style="color:var(--primary); font-size:0.88rem;"><i class="fas fa-book"></i> Materia a asignar (maestros)</strong>
                    </div>
                    <div style="display:grid; grid-template-columns:1fr 1fr; gap:10px;">
                        <div class="form-group">
                            <label>Grado</label>
                            <select id="inviteGrade">
                                <option value="">— Grado —</option>
                                <option value="1">1°</option>
                                <option value="2">2°</option>
                                <option value="3">3°</option>
                                <option value="4">4°</option>
                                <option value="5">5°</option>
                                <option value="6">6°</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Grupo</label>
                            <select id="inviteGroup">
                                <option value="">Todos</option>
                                <option>A</option><option>B</option><option>C</option><option>D</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Materia</label>
                        <select id="inviteSubject" disabled>
                            <option value="">— Primero selecciona un grado —</option>
                        </select>
                    </div>
                </div>
                <button type="submit" class="btn-admin primary"><i class="fas fa-paper-plane"></i> Crear Invitación</button>
            </form>
            <div id="inviteResult"></div>
        </div>
        <div class="admin-card">
            <h3>Invitaciones enviadas</h3>
            <div id="invitationsList">Cargando…</div>
        </div>
    </section>

    <!-- ===== TAB: USUARIOS ===== -->
    <section class="admin-section" id="tab-users">
        <div class="admin-card">
            <h3><i class="fas fa-users"></i> Todos los usuarios</h3>
            <div id="allUsersList">Cargando…</div>
        </div>
    </section>

    <!-- ===== MODAL: Asignar materias ===== -->
    <div id="assignModal" style="display:none; position:fixed; inset:0; z-index:2000; background:rgba(0,0,0,0.4); align-items:center; justify-content:center;">
        <div style="background:#fff; border-radius:16px; max-width:500px; width:90%; padding:30px; margin:auto; position:relative; top:50%; transform:translateY(-50%);">
            <h3 style="color:var(--primary); margin-bottom:14px;" id="assignTitle">Asignar materia</h3>
            <form id="assignForm">
                <input type="hidden" id="assignTeacherId">
                <div style="display:grid; grid-template-columns:1fr 1fr; gap:10px;">
                    <div class="form-group">
                        <label>Grado</label>
                        <select id="assignGrade" required>
                            <option value="">— Grado —</option>
                            <option value="1">1°</option>
                            <option value="2">2°</option>
                            <option value="3">3°</option>
                            <option value="4">4°</option>
                            <option value="5">5°</option>
                            <option value="6">6°</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Grupo (opcional)</label>
                        <select id="assignGroup">
                            <option value="">Todos</option>
                            <option>A</option><option>B</option><option>C</option><option>D</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>Materia</label>
                    <select id="assignSubject" required disabled>
                        <option value="">— Primero selecciona un grado —</option>
                    </select>
                </div>
                <button type="submit" class="btn-admin primary">Asignar</button>
                <button type="button" class="btn-admin" onclick="document.getElementById('assignModal').style.display='none'">Cancelar</button>
            </form>
            <div id="assignMsg"></div>
            <hr style="margin:14px 0;">
            <h4 style="color:var(--primary);">Materias asignadas:</h4>
            <div id="assignedList">—</div>
        </div>
    </div>

    <script src="/script.js?v=20260211-5"></script>
    <script>
    (() => {
        const email = () => (localStorage.getItem('userEmail') || '').trim().toLowerCase();
        const role = () => (localStorage.getItem('userRole') || '').trim();

        if (role() !== 'admin') {
            document.getElementById('adminWelcome').textContent = 'Acceso denegado. Solo administradores.';
            return;
        }
        document.getElementById('adminWelcome').textContent = `Sesión: ${localStorage.getItem('userName') || email()}`;

        // Tabs
        document.querySelectorAll('.admin-tab').forEach(tab => {
            tab.addEventListener('click', () => {
                document.querySelectorAll('.admin-tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.admin-section').forEach(s => s.classList.remove('active'));
                tab.classList.add('active');
                document.getElementById('tab-' + tab.dataset.tab).classList.add('active');
            });
        });

        const api = async (action, method = 'GET', body = null) => {
            const opts = { method, headers: { 'Content-Type': 'application/json', 'x-user-email': email() } };
            if (body) opts.body = JSON.stringify(body);
            const r = await fetch(`/api/admin?action=${action}&admin_email=${encodeURIComponent(email())}`, opts);
            return r.json();
        };

        // Materias por grado
        const materiasPorGrado = {
            '1': [
                { slug: 'ciencias-sociales', name: 'Ciencias Sociales' },
                { slug: 'ingles-1', name: 'Inglés 1' },
                { slug: 'algebra', name: 'Álgebra' },
                { slug: 'taller-lectura-redaccion-1', name: 'Taller de Lectura y Redacción 1' },
                { slug: 'tec-informacion-1', name: 'Tec. de la Información 1' },
                { slug: 'quimica-inorganica', name: 'Química Inorgánica' },
                { slug: 'orientacion-tutorias-1', name: 'Orientación y Tutorías 1' },
                { slug: 'logica', name: 'Lógica' },
                { slug: 'biologia-1', name: 'Biología 1' }
            ],
            '2': [
                { slug: 'taller-lectura-redaccion-2', name: 'Taller de Lectura y Redacción 2' },
                { slug: 'orientacion-tutorias-2', name: 'Orientación y Tutorías 2' },
                { slug: 'geometria-trigonometria', name: 'Geometría y Trigonometría' },
                { slug: 'biologia-2', name: 'Biología 2' },
                { slug: 'tec-informacion-2', name: 'Tec. de la Información 2' },
                { slug: 'quimica-organica', name: 'Química Orgánica' },
                { slug: 'historia-universal', name: 'Historia Universal' },
                { slug: 'metodologia-investigacion', name: 'Metodología de la Investigación' },
                { slug: 'ingles-2', name: 'Inglés 2' }
            ],
            '3': [
                { slug: 'literatura', name: 'Literatura' },
                { slug: 'ecologia', name: 'Ecología' },
                { slug: 'fisica-1', name: 'Física 1' },
                { slug: 'etica', name: 'Ética' },
                { slug: 'orientacion-tutorias-3', name: 'Orientación y Tutorías 3' },
                { slug: 'geometria-analitica', name: 'Geometría Analítica' },
                { slug: 'ingles-3', name: 'Inglés 3' },
                { slug: 'historia-mexico-1', name: 'Historia de México 1' },
                { slug: 'comunicacion', name: 'Comunicación' }
            ],
            '4': [
                { slug: 'geometria', name: 'Geometría' },
                { slug: 'fisica-2', name: 'Física 2' },
                { slug: 'historia-mexico-2', name: 'Historia de México 2' },
                { slug: 'probabilidad-estadistica', name: 'Probabilidad y Estadística' },
                { slug: 'estructura-mexico', name: 'Estructura de México' },
                { slug: 'filosofia', name: 'Filosofía' },
                { slug: 'ingles-4', name: 'Inglés 4' },
                { slug: 'cultura-digital', name: 'Cultura Digital' },
                { slug: 'orientacion-tutorias-4', name: 'Orientación y Tutorías 4' }
            ],
            '5': [
                { slug: 'anatomia-humana', name: 'Anatomía Humana' },
                { slug: 'calculo-diferencial', name: 'Cálculo Diferencial' },
                { slug: 'psicologia', name: 'Psicología' },
                { slug: 'orientacion-tutorias-5', name: 'Orientación y Tutorías 5' },
                { slug: 'sociologia', name: 'Sociología' },
                { slug: 'contabilidad', name: 'Contabilidad' },
                { slug: 'ingles-5', name: 'Inglés 5' },
                { slug: 'literatura-mexicana', name: 'Literatura Mexicana' }
            ],
            '6': [
                { slug: 'proyectos-interdisc', name: 'Proyectos Interdisc.' },
                { slug: 'literatura-universal', name: 'Literatura Universal' },
                { slug: 'ingles-6', name: 'Inglés 6' },
                { slug: 'calculo-integral', name: 'Cálculo Integral' },
                { slug: 'administracion', name: 'Administración' },
                { slug: 'derecho', name: 'Derecho' },
                { slug: 'orientacion-tutorias-6', name: 'Orientación y Tutorías 6' },
                { slug: 'fisiologia-humana', name: 'Fisiología Humana' }
            ]
        };

        // Mapa global slug → nombre
        const subjectNames = {};
        Object.values(materiasPorGrado).flat().forEach(m => { subjectNames[m.slug] = m.name; });
        const subjectLabel = (slug) => subjectNames[slug] || slug;

        // Poblar select de materia según grado seleccionado
        const populateSubjects = (gradeSelect, subjectSelect) => {
            const grade = gradeSelect.value;
            subjectSelect.innerHTML = '';
            if (!grade) {
                subjectSelect.innerHTML = '<option value="">— Primero selecciona un grado —</option>';
                subjectSelect.disabled = true;
                return;
            }
            const materias = materiasPorGrado[grade] || [];
            subjectSelect.innerHTML = '<option value="">— Seleccionar materia —</option>';
            materias.forEach(m => {
                subjectSelect.innerHTML += `<option value="${m.slug}">${m.name}</option>`;
            });
            subjectSelect.disabled = false;
        };

        // Invite: grado → materia
        document.getElementById('inviteGrade').addEventListener('change', () => {
            populateSubjects(document.getElementById('inviteGrade'), document.getElementById('inviteSubject'));
        });
        // Assign modal: grado → materia
        document.getElementById('assignGrade').addEventListener('change', () => {
            populateSubjects(document.getElementById('assignGrade'), document.getElementById('assignSubject'));
        });

        // Ocultar campos de materia si se selecciona Admin
        const inviteRoleSel = document.getElementById('inviteRole');
        const subjectFields = document.getElementById('subjectFields');
        inviteRoleSel.addEventListener('change', () => {
            subjectFields.style.display = inviteRoleSel.value === 'admin' ? 'none' : 'block';
        });

        // --- Maestros ---
        const loadTeachers = async () => {
            const el = document.getElementById('teachersList');
            const data = await api('teachers');
            if (!data.teachers || data.teachers.length === 0) { el.innerHTML = '<p style="color:#888;">No hay maestros registrados aún.</p>'; return; }
            let html = `<table class="admin-table"><thead><tr><th>Nombre</th><th>Email</th><th>Registro</th><th>Materias</th></tr></thead><tbody>`;
            data.teachers.forEach(t => {
                html += `<tr>
                    <td><strong>${t.name}</strong></td>
                    <td>${t.email}</td>
                    <td>${(t.created_at || '').slice(0, 10)}</td>
                    <td><button class="btn-admin small primary" onclick="openAssign(${t.id}, '${t.name}')">Asignar</button></td>
                </tr>`;
            });
            html += '</tbody></table>';
            el.innerHTML = html;
        };

        // --- Invitar ---
        document.getElementById('inviteForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const resEl = document.getElementById('inviteResult');
            resEl.innerHTML = '';
            const invEmail = document.getElementById('inviteEmail').value.trim();
            const invRole = document.getElementById('inviteRole').value;
            const invSubject = document.getElementById('inviteSubject').value.trim();
            const invGrade = document.getElementById('inviteGrade').value;
            const invGroup = document.getElementById('inviteGroup').value;
            const payload = { email: invEmail, role: invRole };
            if (invSubject) payload.subject_slug = invSubject;
            if (invGrade) payload.subject_grade = Number(invGrade);
            if (invGroup) payload.subject_group = invGroup;
            const data = await api('invite', 'POST', payload);
            if (data.link) {
                const fullLink = window.location.origin + data.link;
                const subjectLabel2 = invSubject ? ` · Materia: ${subjectLabel(invSubject)} ${invGrade ? invGrade + '°' : ''} ${invGroup || 'Todos'}` : '';
                resEl.innerHTML = `
                    <div class="msg ok"><i class="fas fa-check-circle"></i> ${data.message}${subjectLabel2}</div>
                    <div class="invite-link">
                        <div style="display:flex; align-items:center; gap:8px; flex-wrap:wrap;">
                            <span style="flex:1; min-width:0;"><i class="fas fa-link"></i> <a href="${fullLink}" target="_blank">${fullLink}</a></span>
                            <button type="button" class="btn-admin small primary" onclick="copyLink('${fullLink}')"><i class="fas fa-copy"></i> Copiar</button>
                        </div>
                        <small style="color:#666; margin-top:6px; display:block;">Válido 48 horas. Envíalo al maestro para que se registre.</small>
                    </div>`;
                document.getElementById('inviteForm').reset();
                loadInvitations();
            } else {
                resEl.innerHTML = `<div class="msg err"><i class="fas fa-exclamation-circle"></i> ${data.message || 'Error'}</div>`;
            }
        });

        window.copyLink = (link) => {
            navigator.clipboard.writeText(link).then(() => {
                const btn = event.target.closest('button');
                if (btn) { const orig = btn.innerHTML; btn.innerHTML = '<i class="fas fa-check"></i> Copiado'; setTimeout(() => btn.innerHTML = orig, 2000); }
            }).catch(() => { prompt('Copia este link:', link); });
        };

        const loadInvitations = async () => {
            const el = document.getElementById('invitationsList');
            const data = await api('invitations');
            if (!data.invitations || data.invitations.length === 0) { el.innerHTML = '<p style="color:#888;">Ninguna invitación.</p>'; return; }
            let html = `<table class="admin-table"><thead><tr><th>Email</th><th>Rol</th><th>Materia</th><th>Estado</th><th>Link</th><th></th></tr></thead><tbody>`;
            data.invitations.forEach(i => {
                const status = i.used_at ? '<span style="color:green">✓ Usada</span>' : (new Date(i.expires_at) < new Date() ? '<span style="color:red">Expirada</span>' : '<span style="color:#c5a059">Pendiente</span>');
                const subject = i.subject_slug ? `${subjectLabel(i.subject_slug)} ${i.subject_grade || ''}° ${i.subject_group || 'Todos'}` : '—';
                const link = window.location.origin + '/login/#invite=' + i.token;
                const linkBtn = !i.used_at ? `<button class="btn-admin small primary" onclick="copyLink('${link}')" title="Copiar link"><i class="fas fa-copy"></i></button>` : '';
                html += `<tr><td>${i.email}</td><td>${i.role}</td><td>${subject}</td><td>${status}</td><td>${linkBtn}</td><td>${!i.used_at ? `<button class="btn-admin small danger" onclick="delInvite(${i.id})">×</button>` : ''}</td></tr>`;
            });
            html += '</tbody></table>';
            el.innerHTML = html;
        };

        window.delInvite = async (id) => {
            await fetch(`/api/admin?action=delete_invitation&id=${id}&admin_email=${encodeURIComponent(email())}`, { method: 'DELETE' });
            loadInvitations();
        };

        // --- Usuarios ---
        const loadUsers = async () => {
            const el = document.getElementById('allUsersList');
            const data = await api('all_users');
            if (!data.users || data.users.length === 0) { el.innerHTML = '<p style="color:#888;">Sin usuarios.</p>'; return; }
            let html = `<table class="admin-table"><thead><tr><th>Nombre</th><th>Email</th><th>Rol</th><th>Grado</th><th>Cambiar</th></tr></thead><tbody>`;
            data.users.forEach(u => {
                html += `<tr>
                    <td>${u.name}</td><td>${u.email}</td>
                    <td><span class="badge-role ${u.role}">${u.role}</span></td>
                    <td>${u.grade ? u.grade + '° ' + (u.group_code || '') : '—'}</td>
                    <td>
                        <select onchange="changeRole(${u.id}, this.value)" style="font-size:0.8rem;padding:4px;">
                            <option value="">—</option>
                            <option value="student" ${u.role==='student'?'selected':''}>student</option>
                            <option value="teacher" ${u.role==='teacher'?'selected':''}>teacher</option>
                            <option value="admin" ${u.role==='admin'?'selected':''}>admin</option>
                        </select>
                    </td></tr>`;
            });
            html += '</tbody></table>';
            el.innerHTML = html;
        };

        window.changeRole = async (userId, newRole) => {
            if (!newRole) return;
            if (!confirm(`¿Cambiar rol a "${newRole}"?`)) return;
            const data = await api('set_role', 'POST', { user_id: userId, role: newRole });
            alert(data.message || 'Hecho');
            loadUsers();
            loadTeachers();
        };

        // --- Asignar materia ---
        window.openAssign = async (teacherId, name) => {
            document.getElementById('assignTeacherId').value = teacherId;
            document.getElementById('assignTitle').textContent = `Asignar materia a ${name}`;
            document.getElementById('assignModal').style.display = 'block';
            const data = await fetch(`/api/admin?action=teacher_subjects&teacher_id=${teacherId}&admin_email=${encodeURIComponent(email())}`).then(r => r.json());
            const list = document.getElementById('assignedList');
            if (!data.subjects || data.subjects.length === 0) { list.innerHTML = '<p style="color:#888;">Ninguna aún.</p>'; return; }
            list.innerHTML = data.subjects.map(s => `<div style="display:flex;align-items:center;gap:8px;margin-bottom:4px;"><span>${subjectLabel(s.subject_slug)} — ${s.grade}° ${s.group_code || 'Todos'}</span> <button class="btn-admin small danger" onclick="delSubject(${s.id}, ${teacherId}, '${name}')">×</button></div>`).join('');
        };

        document.getElementById('assignForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const teacherId = document.getElementById('assignTeacherId').value;
            const data = await api('assign_subject', 'POST', {
                teacher_id: Number(teacherId),
                subject_slug: document.getElementById('assignSubject').value.trim(),
                grade: Number(document.getElementById('assignGrade').value),
                group_code: document.getElementById('assignGroup').value || null
            });
            document.getElementById('assignMsg').innerHTML = `<div class="msg ${data.message.includes('asignada') ? 'ok' : 'err'}">${data.message}</div>`;
            const name = document.getElementById('assignTitle').textContent.replace('Asignar materia a ', '');
            openAssign(Number(teacherId), name);
        });

        window.delSubject = async (id, teacherId, name) => {
            await fetch(`/api/admin?action=remove_subject&id=${id}&admin_email=${encodeURIComponent(email())}`, { method: 'DELETE' });
            openAssign(teacherId, name);
        };

        // Init
        loadTeachers();
        loadInvitations();
        loadUsers();
    })();
    </script>
</body>
</html>
